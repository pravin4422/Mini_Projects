<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CGPA Calculator (Letter Grades)</title>

<style>
:root {
  /* Light theme colors */
  --bg-primary: #ffffff;
  --bg-secondary: #f8fafc;
  --bg-tertiary: #e2e8f0;
  --text-primary: #1e293b;
  --text-secondary: #475569;
  --text-muted: #64748b;
  --border-color: #cbd5e1;
  --accent-primary: #3b82f6;
  --accent-hover: #2563eb;
  --accent-active: #1d4ed8;
  --success-bg: #dcfce7;
  --success-border: #bbf7d0;
  --success-text: #166534;
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
}

[data-theme="dark"] {
  /* Dark theme colors */
  --bg-primary: #0f172a;
  --bg-secondary: #1e293b;
  --bg-tertiary: #334155;
  --text-primary: #f1f5f9;
  --text-secondary: #cbd5e1;
  --text-muted: #94a3b8;
  --border-color: #475569;
  --accent-primary: #60a5fa;
  --accent-hover: #3b82f6;
  --accent-active: #2563eb;
  --success-bg: #064e3b;
  --success-border: #047857;
  --success-text: #6ee7b7;
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4), 0 2px 4px -1px rgba(0, 0, 0, 0.3);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.4), 0 4px 6px -2px rgba(0, 0, 0, 0.3);
}

* {
  box-sizing: border-box;
}

body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  margin: 0;
  padding: 20px;
  background-color: var(--bg-secondary);
  color: var(--text-primary);
  line-height: 1.6;
  transition: background-color 0.3s ease, color 0.3s ease;
  min-height: 100vh;
}

.container {
  max-width: 600px;
  margin: 0 auto;
  background: var(--bg-primary);
  border-radius: 16px;
  padding: 32px;
  box-shadow: var(--shadow-lg);
  transition: all 0.3s ease;
}

.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 32px;
  flex-wrap: wrap;
  gap: 16px;
}

h1 {
  font-size: 28px;
  font-weight: 700;
  margin: 0;
  color: var(--text-primary);
  background: linear-gradient(135deg, var(--accent-primary), var(--accent-hover));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.theme-toggle {
  background: var(--bg-tertiary);
  border: 2px solid var(--border-color);
  border-radius: 25px;
  padding: 8px 16px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
  color: var(--text-secondary);
  transition: all 0.3s ease;
  user-select: none;
  white-space: nowrap;
}

.theme-toggle:hover {
  background: var(--accent-primary);
  color: white;
  border-color: var(--accent-primary);
}

.input-group {
  margin-bottom: 24px;
}

.input-row {
  display: flex;
  align-items: center;
  gap: 12px;
  flex-wrap: wrap;
  margin-bottom: 16px;
}

label {
  font-weight: 600;
  color: var(--text-secondary);
  font-size: 14px;
  min-width: 140px;
  margin: 0;
}

input, select {
  padding: 12px 16px;
  border: 2px solid var(--border-color);
  border-radius: 10px;
  font-size: 15px;
  background: var(--bg-primary);
  color: var(--text-primary);
  transition: all 0.3s ease;
  outline: none;
  flex: 1;
  min-width: 120px;
}

input:focus, select:focus {
  border-color: var(--accent-primary);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

input:hover, select:hover {
  border-color: var(--accent-hover);
}

.btn {
  padding: 14px 24px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  border: none;
  border-radius: 10px;
  background: linear-gradient(135deg, var(--accent-primary), var(--accent-hover));
  color: white;
  transition: all 0.3s ease;
  user-select: none;
  box-shadow: var(--shadow-md);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  text-decoration: none;
}

.btn:hover {
  background: linear-gradient(135deg, var(--accent-hover), var(--accent-active));
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
}

.btn:active {
  transform: translateY(0);
}

.btn-secondary {
  background: var(--bg-tertiary);
  color: var(--text-primary);
  border: 2px solid var(--border-color);
}

.btn-secondary:hover {
  background: var(--border-color);
  border-color: var(--accent-primary);
}

.subjects-container {
  margin: 24px 0;
  padding: 0;
}

.subject-item {
  background: var(--bg-secondary);
  border: 2px solid var(--border-color);
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 16px;
  transition: all 0.3s ease;
}

.subject-item:hover {
  border-color: var(--accent-primary);
  box-shadow: var(--shadow-md);
}

.subject-header {
  font-weight: 600;
  color: var(--accent-primary);
  margin-bottom: 16px;
  font-size: 16px;
}

.subject-inputs {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
}

.input-field {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.input-field label {
  font-size: 13px;
  font-weight: 500;
  min-width: auto;
}

.result {
  margin-top: 32px;
  background: var(--success-bg);
  border: 2px solid var(--success-border);
  border-radius: 12px;
  padding: 24px;
  font-weight: 600;
  color: var(--success-text);
  white-space: pre-line;
  text-align: center;
  box-shadow: var(--shadow-md);
  opacity: 0;
  transform: translateY(20px);
  transition: all 0.5s ease;
}

.result.show {
  opacity: 1;
  transform: translateY(0);
}

.result-title {
  font-size: 18px;
  margin-bottom: 12px;
}

.result-value {
  font-size: 32px;
  font-weight: 700;
  margin: 8px 0;
}

.result-grade {
  font-size: 20px;
  font-weight: 600;
}

.button-group {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
  margin-top: 24px;
}

/* Mobile Responsive Design */
@media (max-width: 768px) {
  body {
    padding: 12px;
  }
  
  .container {
    padding: 24px 20px;
    border-radius: 12px;
  }
  
  h1 {
    font-size: 24px;
  }
  
  .header {
    flex-direction: column;
    align-items: stretch;
    text-align: center;
  }
  
  .theme-toggle {
    align-self: center;
  }
  
  .input-row {
    flex-direction: column;
    align-items: stretch;
    gap: 8px;
  }
  
  label {
    min-width: auto;
    font-size: 15px;
  }
  
  input, select {
    width: 100%;
    min-width: auto;
  }
  
  .subject-inputs {
    grid-template-columns: 1fr;
    gap: 12px;
  }
  
  .button-group {
    flex-direction: column;
  }
  
  .btn {
    width: 100%;
    justify-content: center;
  }
  
  .result-value {
    font-size: 28px;
  }
}

@media (max-width: 480px) {
  .container {
    padding: 20px 16px;
  }
  
  .subject-item {
    padding: 16px;
  }
  
  h1 {
    font-size: 22px;
  }
  
  .btn {
    padding: 12px 20px;
    font-size: 15px;
  }
}

/* Loading animation */
@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; }
}

.loading {
  animation: pulse 1.5s ease-in-out infinite;
}

/* Smooth transitions for theme switching */
* {
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}
</style>
</head>
<body>

<div class="container">
  <div class="header">
    <h1>CGPA Calculator</h1>
    <button class="theme-toggle" id="theme-toggle">Switch Theme</button>
  </div>

  <div class="input-group">
    <div class="input-row">
      <label for="num-subjects">Number of Subjects:</label>
      <input type="number" id="num-subjects" min="1" max="20" value="3" />
      <button class="btn btn-secondary" id="generate-inputs">Generate</button>
    </div>
  </div>

  <div id="subjects-form" class="subjects-container"></div>

  <div class="button-group">
    <button class="btn" id="calculate-cgpa">Calculate CGPA</button>
  </div>

  <div id="cgpa-result" class="result"></div>
</div>

<script>
  // Theme management
  const themeToggle = document.getElementById('theme-toggle');
  const body = document.body;
  
  // Check for saved theme preference or default to light
  const savedTheme = localStorage.getItem('theme') || 'light';
  body.setAttribute('data-theme', savedTheme);
  updateThemeToggleText(savedTheme);
  
  themeToggle.addEventListener('click', () => {
    const currentTheme = body.getAttribute('data-theme');
    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
    
    body.setAttribute('data-theme', newTheme);
    localStorage.setItem('theme', newTheme);
    updateThemeToggleText(newTheme);
  });
  
  function updateThemeToggleText(theme) {
    themeToggle.textContent = theme === 'dark' ? 'Light Mode' : 'Dark Mode';
  }

  // CGPA Calculator Logic
  const gradeMap = {
    'O': 10,
    'A+': 9,
    'A': 8,
    'B+': 7,
    'B': 6,
    'C': 5,
    'F': 0
  };

  const generateBtn = document.getElementById("generate-inputs");
  const form = document.getElementById("subjects-form");
  const calculateBtn = document.getElementById("calculate-cgpa");
  const resultDiv = document.getElementById("cgpa-result");
  const numSubjectsInput = document.getElementById("num-subjects");

  generateBtn.addEventListener("click", () => {
    const n = parseInt(numSubjectsInput.value);
    if (isNaN(n) || n < 1 || n > 20) {
      alert("Please enter number of subjects between 1 and 20");
      return;
    }

    form.innerHTML = "";
    resultDiv.classList.remove('show');

    for (let i = 1; i <= n; i++) {
      const subjectDiv = document.createElement("div");
      subjectDiv.className = "subject-item";
      
      subjectDiv.innerHTML = `
        <div class="subject-header">Subject ${i}</div>
        <div class="subject-inputs">
          <div class="input-field">
            <label>Grade</label>
            <select class="grade-select" required>
              <option value="">Select grade</option>
              <option value="O">O (Outstanding)</option>
              <option value="A+">A+ (Excellent)</option>
              <option value="A">A (Very Good)</option>
              <option value="B+">B+ (Good)</option>
              <option value="B">B (Above Average)</option>
              <option value="C">C (Average)</option>
              <option value="F">F (Fail)</option>
            </select>
          </div>
          <div class="input-field">
            <label>Credits</label>
            <input type="number" class="credit-input" min="0.5" step="0.5" placeholder="e.g., 3" required />
          </div>
        </div>
      `;

      form.appendChild(subjectDiv);
    }
  });

  calculateBtn.addEventListener("click", () => {
    const grades = form.querySelectorAll(".grade-select");
    const credits = form.querySelectorAll(".credit-input");

    if (grades.length === 0) {
      alert("Please generate subject inputs first");
      return;
    }

    let totalPoints = 0;
    let totalCredits = 0;
    let hasError = false;

    for (let i = 0; i < grades.length; i++) {
      const grade = grades[i].value;
      const credit = parseFloat(credits[i].value);

      if (!grade || !(grade in gradeMap)) {
        alert(`Please select a valid grade for Subject ${i + 1}`);
        hasError = true;
        break;
      }

      if (isNaN(credit) || credit <= 0) {
        alert(`Please enter valid credits (> 0) for Subject ${i + 1}`);
        hasError = true;
        break;
      }

      const gp = gradeMap[grade];
      totalPoints += gp * credit;
      totalCredits += credit;
    }

    if (hasError) return;

    if (totalCredits === 0) {
      resultDiv.textContent = "Total credits cannot be zero.";
      resultDiv.classList.add('show');
      return;
    }

    const cgpa = totalPoints / totalCredits;

    // Get overall letter grade from CGPA
    let overallGrade = "F";
    let gradeDescription = "Fail";
    
    if (cgpa >= 9.5) {
      overallGrade = "O";
      gradeDescription = "Outstanding";
    } else if (cgpa >= 8.5) {
      overallGrade = "A+";
      gradeDescription = "Excellent";
    } else if (cgpa >= 7.5) {
      overallGrade = "A";
      gradeDescription = "Very Good";
    } else if (cgpa >= 6.5) {
      overallGrade = "B+";
      gradeDescription = "Good";
    } else if (cgpa >= 5.5) {
      overallGrade = "B";
      gradeDescription = "Above Average";
    } else if (cgpa >= 4.0) {
      overallGrade = "C";
      gradeDescription = "Average";
    }

    resultDiv.innerHTML = `
      <div class="result-title">Your Academic Performance</div>
      <div class="result-value">${cgpa.toFixed(2)}</div>
      <div class="result-grade">Grade: ${overallGrade} (${gradeDescription})</div>
    `;
    
    resultDiv.classList.add('show');
  });

  // Auto-generate on page load
  generateBtn.click();
</script>

</body>
</html>
